---
phase: 01-foundation-environment-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - tsconfig.json
  - next.config.ts
  - tailwind.config.ts
  - postcss.config.mjs
  - app/layout.tsx
  - app/page.tsx
  - app/globals.css
  - components/theme-provider.tsx
  - components.json
  - lib/utils.ts
autonomous: true

must_haves:
  truths:
    - "Next.js project runs locally with npm run dev"
    - "TypeScript compilation succeeds without errors"
    - "Tailwind CSS styles apply correctly"
    - "Theme provider wraps the application"
    - "Dark mode is the default theme"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "next-themes"
    - path: "app/layout.tsx"
      provides: "Root layout with ThemeProvider"
      contains: "ThemeProvider"
    - path: "app/globals.css"
      provides: "Theme color definitions"
      contains: "@theme"
    - path: "components/theme-provider.tsx"
      provides: "Client-side theme provider wrapper"
      contains: "use client"
  key_links:
    - from: "app/layout.tsx"
      to: "components/theme-provider.tsx"
      via: "import and wrap children"
      pattern: "ThemeProvider.*defaultTheme.*dark"
---

<objective>
Set up Next.js 16 project with TypeScript, Tailwind CSS v4, and theme system foundation.

Purpose: Establish the core project structure and theme infrastructure before building UI components. This is the foundation all other code depends on.

Output: A working Next.js project with dark mode as default, theme colors defined, and ThemeProvider configured.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-environment-setup/01-CONTEXT.md
@.planning/phases/01-foundation-environment-setup/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Next.js project and install dependencies</name>
  <files>
    - package.json
    - package-lock.json
    - tsconfig.json
    - next.config.ts
    - tailwind.config.ts
    - postcss.config.mjs
    - app/layout.tsx
    - app/page.tsx
    - app/globals.css
    - lib/utils.ts
  </files>
  <action>
    1. Create Next.js 16 project in current directory:
       ```bash
       npx create-next-app@latest . --yes
       ```
       This uses all defaults: TypeScript, Tailwind v4, App Router, Turbopack, ESLint.

    2. Install theme and UI dependencies:
       ```bash
       npm install next-themes
       npx shadcn@latest init -y
       ```
       For shadcn init, accept defaults (it auto-detects Next.js 16 + Tailwind v4).

    3. Add the shadcn button component (needed for theme toggle):
       ```bash
       npx shadcn@latest add button
       ```

    4. Verify installation:
       ```bash
       npm run dev
       ```
       Visit http://localhost:3000 - should show Next.js default page.
  </action>
  <verify>
    - `npm run dev` starts without errors
    - http://localhost:3000 loads successfully
    - `package.json` contains "next-themes" dependency
    - `components/ui/button.tsx` exists (from shadcn)
  </verify>
  <done>
    Next.js project created with next-themes and shadcn/ui button component installed. Dev server runs successfully.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure theme colors and ThemeProvider</name>
  <files>
    - app/globals.css
    - components/theme-provider.tsx
    - app/layout.tsx
  </files>
  <action>
    1. Update `app/globals.css` to define theme colors using Tailwind v4 CSS-first approach:
       ```css
       @import "tailwindcss";

       @theme {
         /* Light mode colors - warm cream */
         --color-background: #faf8f5;
         --color-foreground: #1a1a1a;

         /* Dark mode colors - deep space black */
         --color-background-dark: #000000;
         --color-foreground-dark: #f5f5f5;

         /* Accent colors - gold/copper */
         --color-accent: #d4af37;
         --color-accent-hover: #b8972e;
         --color-accent-copper: #b87333;

         /* Muted/secondary */
         --color-muted: #6b6b6b;
         --color-muted-dark: #a0a0a0;

         /* Border colors */
         --color-border: #e5e5e5;
         --color-border-dark: #333333;
       }

       /* Dark mode custom variant for Tailwind v4 */
       @custom-variant dark (&:where(.dark, .dark *));

       /* Base styles */
       body {
         @apply bg-background text-foreground antialiased;
         transition: background-color 0.3s ease, color 0.3s ease;
       }

       .dark body,
       .dark {
         --color-background: var(--color-background-dark);
         --color-foreground: var(--color-foreground-dark);
         --color-muted: var(--color-muted-dark);
         --color-border: var(--color-border-dark);
       }
       ```

    2. Create `components/theme-provider.tsx`:
       ```typescript
       "use client"

       import { ThemeProvider as NextThemesProvider } from "next-themes"

       export function ThemeProvider({
         children,
         ...props
       }: React.ComponentProps<typeof NextThemesProvider>) {
         return <NextThemesProvider {...props}>{children}</NextThemesProvider>
       }
       ```

    3. Update `app/layout.tsx` to wrap with ThemeProvider:
       ```typescript
       import type { Metadata } from "next"
       import { Geist, Geist_Mono } from "next/font/google"
       import { ThemeProvider } from "@/components/theme-provider"
       import "./globals.css"

       const geistSans = Geist({
         variable: "--font-geist-sans",
         subsets: ["latin"],
       })

       const geistMono = Geist_Mono({
         variable: "--font-geist-mono",
         subsets: ["latin"],
       })

       export const metadata: Metadata = {
         title: "Beautify",
         description: "Transform your photos into mystical cosmic portraits",
       }

       export default function RootLayout({
         children,
       }: Readonly<{
         children: React.ReactNode
       }>) {
         return (
           <html lang="en" suppressHydrationWarning>
             <body
               className={`${geistSans.variable} ${geistMono.variable} antialiased`}
             >
               <ThemeProvider
                 attribute="class"
                 defaultTheme="dark"
                 enableSystem
                 disableTransitionOnChange={false}
               >
                 {children}
               </ThemeProvider>
             </body>
           </html>
         )
       }
       ```

       Key points:
       - `suppressHydrationWarning` on html prevents hydration mismatch warnings
       - `attribute="class"` adds .dark class to html element
       - `defaultTheme="dark"` makes dark mode the default (per user decision)
       - `enableSystem` respects system preference if no explicit choice
       - `disableTransitionOnChange={false}` enables smooth transitions
  </action>
  <verify>
    - `npm run dev` still works
    - Page loads with dark background (near-black)
    - Browser DevTools shows `<html class="dark">` on page load
    - No console errors about hydration mismatches
  </verify>
  <done>
    Theme colors defined in CSS with Tailwind v4 @theme directive. ThemeProvider wraps app with dark as default theme. No flash-on-load.
  </done>
</task>

</tasks>

<verification>
Run these checks after completing all tasks:

1. **Dev server runs:**
   ```bash
   npm run dev
   ```
   Should start without errors.

2. **Dark mode is default:**
   - Open http://localhost:3000
   - Background should be dark (black/near-black)
   - Inspect HTML element - should have `class="dark"`

3. **No FOUC (flash of unstyled content):**
   - Hard refresh the page (Ctrl+Shift+R)
   - Page should load directly into dark mode without flashing light

4. **Theme colors work:**
   - Add a temporary element with `text-accent` class
   - Should display gold color (#d4af37)

5. **TypeScript compiles:**
   ```bash
   npm run build
   ```
   Should complete without type errors.
</verification>

<success_criteria>
- [ ] Next.js 16 project created with TypeScript and Tailwind v4
- [ ] next-themes installed and ThemeProvider configured
- [ ] shadcn/ui initialized with button component
- [ ] Theme colors defined (gold accent, deep space black, warm cream)
- [ ] Dark mode is default with no flash-on-load
- [ ] `npm run dev` and `npm run build` succeed
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-environment-setup/01-01-SUMMARY.md`
</output>
